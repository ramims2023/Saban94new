// ... existing code ...

<script>
    // הוספת משתנה גלובלי לשמירת היציאות
    let exits = JSON.parse(localStorage.getItem('exits')) || [];
    
    // עדכון פונקציית addExit
    function addExit() {
        const driver = document.getElementById('driver').value;
        const client = document.getElementById('client').value;
        const warehouse = document.getElementById('warehouse').value;
        const exitNumber = document.getElementById('exit-number').value;
        const time = document.getElementById('time').value;
        const transportType = document.getElementById('transport-type').value;

        const newExit = { driver, client, warehouse, exitNumber, time, transportType };
        exits.push(newExit);
        // שמירה ב-localStorage
        localStorage.setItem('exits', JSON.stringify(exits));
        updateTable();
    }

    // עדכון פונקציית deleteExit
    function deleteExit(index) {
        exits.splice(index, 1);
        // עדכון ה-localStorage לאחר מחיקה
        localStorage.setItem('exits', JSON.stringify(exits));
        updateTable();
    }

    // הוספת טעינת נתונים בעת טעינת הדף
    window.onload = function() {
        updateTable();
    }

    // ... rest of the existing code ...

    // עבור החלק של ההערות, נוסיף שמירה גם להערות
    let notes = JSON.parse(localStorage.getItem('notes')) || [];

    function addNote() {
        const noteInput = document.getElementById("noteInput").value;
        const noteUpdater = document.getElementById("noteUpdater").value;
        const currentTime = new Date().toLocaleTimeString();
        
        if (!noteInput) {
            alert("אנא הקלד הערה.");
            return;
        }

        const newNote = {
            text: noteInput,
            status: 'בטיפול',
            time: currentTime,
            updater: noteUpdater
        };

        notes.push(newNote);
        localStorage.setItem('notes', JSON.stringify(notes));
        renderNotes();
        document.getElementById("noteInput").value = "";
    }

    function renderNotes() {
        const tableBody = document.getElementById("notesTableBody");
        tableBody.innerHTML = '';
        
        notes.forEach((note, index) => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${note.text}</td>
                <td>
                    <select onchange="updateNoteStatus(${index}, this.value)">
                        <option value="בטיפול" ${note.status === 'בטיפול' ? 'selected' : ''}>בטיפול</option>
                        <option value="טופלה" ${note.status === 'טופלה' ? 'selected' : ''}>טופלה</option>
                    </select>
                </td>
                <td>${note.time}</td>
                <td>${note.updater}</td>
                <td><button class="delete-btn" onclick="deleteNote(${index})">מחק</button></td>
            `;
            
            if (note.status === 'בטיפול') {
                row.classList.add('highlight-yellow');
            } else {
                row.classList.add('highlight-green');
            }
            
            tableBody.appendChild(row);
        });
    }

    function updateNoteStatus(index, status) {
        notes[index].status = status;
        localStorage.setItem('notes', JSON.stringify(notes));
        renderNotes();
    }

    function deleteNote(index) {
        notes.splice(index, 1);
        localStorage.setItem('notes', JSON.stringify(notes));
        renderNotes();
    }

    // טעינת הערות בעת טעינת הדף
    window.onload = function() {
        updateTable();
        renderNotes();
    }
</script>
